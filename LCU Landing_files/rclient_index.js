!function(e){"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?module.exports=e():"undefined"==typeof window.RClientWindowMessenger&&(window.RClientWindowMessenger=e())}(function(){"use strict";const e=new Map,n=window.opener||window.top,s="RClientWindowMessenger",t={addMessageListeners:function(n){n.forEach(function(n){var s=e.get(n.messageType);s||(s=new Set,e.set(n.messageType,s)),s.add(n)})},addMessageListener:function(e){t.addMessageListeners([e])},removeMessageListener:function(n){if(n.handlers){var s=e.get(n.messageType);s&&s.delete(n)}else e.delete(n.messageType)},sendMessage:function(e){e=t.clone(e),e.type=s,n.postMessage(e,"*")},dispatchMessage:function(n){var o=n.data,i=n.origin,a=i.includes("://localhost")||i.includes("://127.0.0.1");if(o.type===s&&a){var r=e.get(o.messageType);r&&r.forEach(function(e){t.toArray(e.handlers).forEach(function(e){e(o.messageType,t.clone(o.data),n.source,n.origin)})})}},clone:function(e){return"object"!=typeof e?e:JSON.parse(JSON.stringify(e))},toArray:function(e){return[].concat(e)}};return window.addEventListener("message",t.dispatchMessage),t});