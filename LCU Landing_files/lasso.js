/**
 * @license almond 0.2.9 Copyright (c) 2011-2014, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/almond for details
 */

//     Underscore.js 1.5.2
//     http://underscorejs.org
//     (c) 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
//     Underscore may be freely distributed under the MIT license.

!function(){var t,e,n;!function(r){function i(t,e){return E.call(t,e)}function u(t,e){var n,r,i,u,a,o,c,s,l,f,d,h=e&&e.split("/"),p=y.map,m=p&&p["*"]||{};if(t&&"."===t.charAt(0))if(e){for(h=h.slice(0,h.length-1),t=t.split("/"),a=t.length-1,y.nodeIdCompat&&x.test(t[a])&&(t[a]=t[a].replace(x,"")),t=h.concat(t),l=0;l<t.length;l+=1)if(d=t[l],"."===d)t.splice(l,1),l-=1;else if(".."===d){if(1===l&&(".."===t[2]||".."===t[0]))break;l>0&&(t.splice(l-1,2),l-=2)}t=t.join("/")}else 0===t.indexOf("./")&&(t=t.substring(2));if((h||m)&&p){for(n=t.split("/"),l=n.length;l>0;l-=1){if(r=n.slice(0,l).join("/"),h)for(f=h.length;f>0;f-=1)if(i=p[h.slice(0,f).join("/")],i&&(i=i[r])){u=i,o=l;break}if(u)break;!c&&m&&m[r]&&(c=m[r],s=l)}!u&&c&&(u=c,o=s),u&&(n.splice(0,o,u),t=n.join("/"))}return t}function a(t,e){return function(){return h.apply(r,w.call(arguments,0).concat([t,e]))}}function o(t){return function(e){return u(e,t)}}function c(t){return function(e){v[t]=e}}function s(t){if(i(g,t)){var e=g[t];delete g[t],b[t]=!0,d.apply(r,e)}if(!i(v,t)&&!i(b,t))throw new Error("No "+t);return v[t]}function l(t){var e,n=t?t.indexOf("!"):-1;return n>-1&&(e=t.substring(0,n),t=t.substring(n+1,t.length)),[e,t]}function f(t){return function(){return y&&y.config&&y.config[t]||{}}}var d,h,p,m,v={},g={},y={},b={},E=Object.prototype.hasOwnProperty,w=[].slice,x=/\.js$/;p=function(t,e){var n,r=l(t),i=r[0];return t=r[1],i&&(i=u(i,e),n=s(i)),i?t=n&&n.normalize?n.normalize(t,o(e)):u(t,e):(t=u(t,e),r=l(t),i=r[0],t=r[1],i&&(n=s(i))),{f:i?i+"!"+t:t,n:t,pr:i,p:n}},m={require:function(t){return a(t)},exports:function(t){var e=v[t];return"undefined"!=typeof e?e:v[t]={}},module:function(t){return{id:t,uri:"",exports:v[t],config:f(t)}}},d=function(t,e,n,u){var o,l,f,d,h,y,E=[],w=typeof n;if(u=u||t,"undefined"===w||"function"===w){for(e=!e.length&&n.length?["require","exports","module"]:e,h=0;h<e.length;h+=1)if(d=p(e[h],u),l=d.f,"require"===l)E[h]=m.require(t);else if("exports"===l)E[h]=m.exports(t),y=!0;else if("module"===l)o=E[h]=m.module(t);else if(i(v,l)||i(g,l)||i(b,l))E[h]=s(l);else{if(!d.p)throw new Error(t+" missing "+l);d.p.load(d.n,a(u,!0),c(l),{}),E[h]=v[l]}f=n?n.apply(v[t],E):void 0,t&&(o&&o.exports!==r&&o.exports!==v[t]?v[t]=o.exports:f===r&&y||(v[t]=f))}else t&&(v[t]=n)},t=e=h=function(t,e,n,i,u){if("string"==typeof t)return m[t]?m[t](e):s(p(t,e).f);if(!t.splice){if(y=t,y.deps&&h(y.deps,y.callback),!e)return;e.splice?(t=e,e=n,n=null):t=r}return e=e||function(){},"function"==typeof n&&(n=i,i=u),i?d(r,t,e,n):setTimeout(function(){d(r,t,e,n)},4),h},h.config=function(t){return h(t)},t._defined=v,n=function(t,e,n){e.splice||(n=e,e=[]),i(v,t)||i(g,t)||(g[t]=[t,e,n])},n.amd={jQuery:!0}}(),n("../components/almond/almond",function(){}),n("lasso/features",[],function(){var t=document.createElement("div");return{tagName:"lasso-embed",queryAttributeName:"query",endpointAttributeName:"endpoint",endpointDataAttributeName:"data-lasso-endpoint",rodeoMaxQueueConcurrency:20,rodeoConcurrencyAttributeName:"data-rodeo-concurrency",nativeJSON:"undefined"!=typeof window.JSON,cors:"withCredentials"in new XMLHttpRequest,mutationObservers:"function"==typeof window.MutationObserver,customElements:"function"==typeof document.registerElement,unknownElements:function(){var t=document.createElement("a");return t.innerHTML="<xyz></xyz>",1===t.childNodes.length}(),shadowDOM:"function"==typeof t.createShadowRoot}}),function(){var t=this,e=t._,n={},r=Array.prototype,i=Object.prototype,u=Function.prototype,a=r.push,o=r.slice,c=r.concat,s=i.toString,l=i.hasOwnProperty,f=r.forEach,d=r.map,h=r.reduce,p=r.reduceRight,m=r.filter,v=r.every,g=r.some,y=r.indexOf,b=r.lastIndexOf,E=Array.isArray,w=Object.keys,x=u.bind,j=function(t){return t instanceof j?t:this instanceof j?void(this._wrapped=t):new j(t)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=j),exports._=j):t._=j,j.VERSION="1.5.2";var _=j.each=j.forEach=function(t,e,r){if(null!=t)if(f&&t.forEach===f)t.forEach(e,r);else if(t.length===+t.length){for(var i=0,u=t.length;u>i;i++)if(e.call(r,t[i],i,t)===n)return}else for(var a=j.keys(t),i=0,u=a.length;u>i;i++)if(e.call(r,t[a[i]],a[i],t)===n)return};j.map=j.collect=function(t,e,n){var r=[];return null==t?r:d&&t.map===d?t.map(e,n):(_(t,function(t,i,u){r.push(e.call(n,t,i,u))}),r)};var k="Reduce of empty array with no initial value";j.reduce=j.foldl=j.inject=function(t,e,n,r){var i=arguments.length>2;if(null==t&&(t=[]),h&&t.reduce===h)return r&&(e=j.bind(e,r)),i?t.reduce(e,n):t.reduce(e);if(_(t,function(t,u,a){i?n=e.call(r,n,t,u,a):(n=t,i=!0)}),!i)throw new TypeError(k);return n},j.reduceRight=j.foldr=function(t,e,n,r){var i=arguments.length>2;if(null==t&&(t=[]),p&&t.reduceRight===p)return r&&(e=j.bind(e,r)),i?t.reduceRight(e,n):t.reduceRight(e);var u=t.length;if(u!==+u){var a=j.keys(t);u=a.length}if(_(t,function(o,c,s){c=a?a[--u]:--u,i?n=e.call(r,n,t[c],c,s):(n=t[c],i=!0)}),!i)throw new TypeError(k);return n},j.find=j.detect=function(t,e,n){var r;return N(t,function(t,i,u){return e.call(n,t,i,u)?(r=t,!0):void 0}),r},j.filter=j.select=function(t,e,n){var r=[];return null==t?r:m&&t.filter===m?t.filter(e,n):(_(t,function(t,i,u){e.call(n,t,i,u)&&r.push(t)}),r)},j.reject=function(t,e,n){return j.filter(t,function(t,r,i){return!e.call(n,t,r,i)},n)},j.every=j.all=function(t,e,r){e||(e=j.identity);var i=!0;return null==t?i:v&&t.every===v?t.every(e,r):(_(t,function(t,u,a){return(i=i&&e.call(r,t,u,a))?void 0:n}),!!i)};var N=j.some=j.any=function(t,e,r){e||(e=j.identity);var i=!1;return null==t?i:g&&t.some===g?t.some(e,r):(_(t,function(t,u,a){return i||(i=e.call(r,t,u,a))?n:void 0}),!!i)};j.contains=j.include=function(t,e){return null==t?!1:y&&t.indexOf===y?-1!=t.indexOf(e):N(t,function(t){return t===e})},j.invoke=function(t,e){var n=o.call(arguments,2),r=j.isFunction(e);return j.map(t,function(t){return(r?e:t[e]).apply(t,n)})},j.pluck=function(t,e){return j.map(t,function(t){return t[e]})},j.where=function(t,e,n){return j.isEmpty(e)?n?void 0:[]:j[n?"find":"filter"](t,function(t){for(var n in e)if(e[n]!==t[n])return!1;return!0})},j.findWhere=function(t,e){return j.where(t,e,!0)},j.max=function(t,e,n){if(!e&&j.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.max.apply(Math,t);if(!e&&j.isEmpty(t))return-1/0;var r={computed:-1/0,value:-1/0};return _(t,function(t,i,u){var a=e?e.call(n,t,i,u):t;a>r.computed&&(r={value:t,computed:a})}),r.value},j.min=function(t,e,n){if(!e&&j.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.min.apply(Math,t);if(!e&&j.isEmpty(t))return 1/0;var r={computed:1/0,value:1/0};return _(t,function(t,i,u){var a=e?e.call(n,t,i,u):t;a<r.computed&&(r={value:t,computed:a})}),r.value},j.shuffle=function(t){var e,n=0,r=[];return _(t,function(t){e=j.random(n++),r[n-1]=r[e],r[e]=t}),r},j.sample=function(t,e,n){return arguments.length<2||n?t[j.random(t.length-1)]:j.shuffle(t).slice(0,Math.max(0,e))};var A=function(t){return j.isFunction(t)?t:function(e){return e[t]}};j.sortBy=function(t,e,n){var r=A(e);return j.pluck(j.map(t,function(t,e,i){return{value:t,index:e,criteria:r.call(n,t,e,i)}}).sort(function(t,e){var n=t.criteria,r=e.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(r>n||void 0===r)return-1}return t.index-e.index}),"value")};var O=function(t){return function(e,n,r){var i={},u=null==n?j.identity:A(n);return _(e,function(n,a){var o=u.call(r,n,a,e);t(i,o,n)}),i}};j.groupBy=O(function(t,e,n){(j.has(t,e)?t[e]:t[e]=[]).push(n)}),j.indexBy=O(function(t,e,n){t[e]=n}),j.countBy=O(function(t,e){j.has(t,e)?t[e]++:t[e]=1}),j.sortedIndex=function(t,e,n,r){n=null==n?j.identity:A(n);for(var i=n.call(r,e),u=0,a=t.length;a>u;){var o=u+a>>>1;n.call(r,t[o])<i?u=o+1:a=o}return u},j.toArray=function(t){return t?j.isArray(t)?o.call(t):t.length===+t.length?j.map(t,j.identity):j.values(t):[]},j.size=function(t){return null==t?0:t.length===+t.length?t.length:j.keys(t).length},j.first=j.head=j.take=function(t,e,n){return null==t?void 0:null==e||n?t[0]:o.call(t,0,e)},j.initial=function(t,e,n){return o.call(t,0,t.length-(null==e||n?1:e))},j.last=function(t,e,n){return null==t?void 0:null==e||n?t[t.length-1]:o.call(t,Math.max(t.length-e,0))},j.rest=j.tail=j.drop=function(t,e,n){return o.call(t,null==e||n?1:e)},j.compact=function(t){return j.filter(t,j.identity)};var C=function(t,e,n){return e&&j.every(t,j.isArray)?c.apply(n,t):(_(t,function(t){j.isArray(t)||j.isArguments(t)?e?a.apply(n,t):C(t,e,n):n.push(t)}),n)};j.flatten=function(t,e){return C(t,e,[])},j.without=function(t){return j.difference(t,o.call(arguments,1))},j.uniq=j.unique=function(t,e,n,r){j.isFunction(e)&&(r=n,n=e,e=!1);var i=n?j.map(t,n,r):t,u=[],a=[];return _(i,function(n,r){(e?r&&a[a.length-1]===n:j.contains(a,n))||(a.push(n),u.push(t[r]))}),u},j.union=function(){return j.uniq(j.flatten(arguments,!0))},j.intersection=function(t){var e=o.call(arguments,1);return j.filter(j.uniq(t),function(t){return j.every(e,function(e){return j.indexOf(e,t)>=0})})},j.difference=function(t){var e=c.apply(r,o.call(arguments,1));return j.filter(t,function(t){return!j.contains(e,t)})},j.zip=function(){for(var t=j.max(j.pluck(arguments,"length").concat(0)),e=new Array(t),n=0;t>n;n++)e[n]=j.pluck(arguments,""+n);return e},j.object=function(t,e){if(null==t)return{};for(var n={},r=0,i=t.length;i>r;r++)e?n[t[r]]=e[r]:n[t[r][0]]=t[r][1];return n},j.indexOf=function(t,e,n){if(null==t)return-1;var r=0,i=t.length;if(n){if("number"!=typeof n)return r=j.sortedIndex(t,e),t[r]===e?r:-1;r=0>n?Math.max(0,i+n):n}if(y&&t.indexOf===y)return t.indexOf(e,n);for(;i>r;r++)if(t[r]===e)return r;return-1},j.lastIndexOf=function(t,e,n){if(null==t)return-1;var r=null!=n;if(b&&t.lastIndexOf===b)return r?t.lastIndexOf(e,n):t.lastIndexOf(e);for(var i=r?n:t.length;i--;)if(t[i]===e)return i;return-1},j.range=function(t,e,n){arguments.length<=1&&(e=t||0,t=0),n=arguments[2]||1;for(var r=Math.max(Math.ceil((e-t)/n),0),i=0,u=new Array(r);r>i;)u[i++]=t,t+=n;return u};var S=function(){};j.bind=function(t,e){var n,r;if(x&&t.bind===x)return x.apply(t,o.call(arguments,1));if(!j.isFunction(t))throw new TypeError;return n=o.call(arguments,2),r=function(){if(!(this instanceof r))return t.apply(e,n.concat(o.call(arguments)));S.prototype=t.prototype;var i=new S;S.prototype=null;var u=t.apply(i,n.concat(o.call(arguments)));return Object(u)===u?u:i}},j.partial=function(t){var e=o.call(arguments,1);return function(){return t.apply(this,e.concat(o.call(arguments)))}},j.bindAll=function(t){var e=o.call(arguments,1);if(0===e.length)throw new Error("bindAll must be passed function names");return _(e,function(e){t[e]=j.bind(t[e],t)}),t},j.memoize=function(t,e){var n={};return e||(e=j.identity),function(){var r=e.apply(this,arguments);return j.has(n,r)?n[r]:n[r]=t.apply(this,arguments)}},j.delay=function(t,e){var n=o.call(arguments,2);return setTimeout(function(){return t.apply(null,n)},e)},j.defer=function(t){return j.delay.apply(j,[t,1].concat(o.call(arguments,1)))},j.throttle=function(t,e,n){var r,i,u,a=null,o=0;n||(n={});var c=function(){o=n.leading===!1?0:new Date,a=null,u=t.apply(r,i)};return function(){var s=new Date;o||n.leading!==!1||(o=s);var l=e-(s-o);return r=this,i=arguments,0>=l?(clearTimeout(a),a=null,o=s,u=t.apply(r,i)):a||n.trailing===!1||(a=setTimeout(c,l)),u}},j.debounce=function(t,e,n){var r,i,u,a,o;return function(){u=this,i=arguments,a=new Date;var c=function(){var s=new Date-a;e>s?r=setTimeout(c,e-s):(r=null,n||(o=t.apply(u,i)))},s=n&&!r;return r||(r=setTimeout(c,e)),s&&(o=t.apply(u,i)),o}},j.once=function(t){var e,n=!1;return function(){return n?e:(n=!0,e=t.apply(this,arguments),t=null,e)}},j.wrap=function(t,e){return function(){var n=[t];return a.apply(n,arguments),e.apply(this,n)}},j.compose=function(){var t=arguments;return function(){for(var e=arguments,n=t.length-1;n>=0;n--)e=[t[n].apply(this,e)];return e[0]}},j.after=function(t,e){return function(){return--t<1?e.apply(this,arguments):void 0}},j.keys=w||function(t){if(t!==Object(t))throw new TypeError("Invalid object");var e=[];for(var n in t)j.has(t,n)&&e.push(n);return e},j.values=function(t){for(var e=j.keys(t),n=e.length,r=new Array(n),i=0;n>i;i++)r[i]=t[e[i]];return r},j.pairs=function(t){for(var e=j.keys(t),n=e.length,r=new Array(n),i=0;n>i;i++)r[i]=[e[i],t[e[i]]];return r},j.invert=function(t){for(var e={},n=j.keys(t),r=0,i=n.length;i>r;r++)e[t[n[r]]]=n[r];return e},j.functions=j.methods=function(t){var e=[];for(var n in t)j.isFunction(t[n])&&e.push(n);return e.sort()},j.extend=function(t){return _(o.call(arguments,1),function(e){if(e)for(var n in e)t[n]=e[n]}),t},j.pick=function(t){var e={},n=c.apply(r,o.call(arguments,1));return _(n,function(n){n in t&&(e[n]=t[n])}),e},j.omit=function(t){var e={},n=c.apply(r,o.call(arguments,1));for(var i in t)j.contains(n,i)||(e[i]=t[i]);return e},j.defaults=function(t){return _(o.call(arguments,1),function(e){if(e)for(var n in e)void 0===t[n]&&(t[n]=e[n])}),t},j.clone=function(t){return j.isObject(t)?j.isArray(t)?t.slice():j.extend({},t):t},j.tap=function(t,e){return e(t),t};var q=function(t,e,n,r){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return t===e;t instanceof j&&(t=t._wrapped),e instanceof j&&(e=e._wrapped);var i=s.call(t);if(i!=s.call(e))return!1;switch(i){case"[object String]":return t==String(e);case"[object Number]":return t!=+t?e!=+e:0==t?1/t==1/e:t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object RegExp]":return t.source==e.source&&t.global==e.global&&t.multiline==e.multiline&&t.ignoreCase==e.ignoreCase}if("object"!=typeof t||"object"!=typeof e)return!1;for(var u=n.length;u--;)if(n[u]==t)return r[u]==e;var a=t.constructor,o=e.constructor;if(a!==o&&!(j.isFunction(a)&&a instanceof a&&j.isFunction(o)&&o instanceof o))return!1;n.push(t),r.push(e);var c=0,l=!0;if("[object Array]"==i){if(c=t.length,l=c==e.length)for(;c--&&(l=q(t[c],e[c],n,r)););}else{for(var f in t)if(j.has(t,f)&&(c++,!(l=j.has(e,f)&&q(t[f],e[f],n,r))))break;if(l){for(f in e)if(j.has(e,f)&&!c--)break;l=!c}}return n.pop(),r.pop(),l};j.isEqual=function(t,e){return q(t,e,[],[])},j.isEmpty=function(t){if(null==t)return!0;if(j.isArray(t)||j.isString(t))return 0===t.length;for(var e in t)if(j.has(t,e))return!1;return!0},j.isElement=function(t){return!(!t||1!==t.nodeType)},j.isArray=E||function(t){return"[object Array]"==s.call(t)},j.isObject=function(t){return t===Object(t)},_(["Arguments","Function","String","Number","Date","RegExp"],function(t){j["is"+t]=function(e){return s.call(e)=="[object "+t+"]"}}),j.isArguments(arguments)||(j.isArguments=function(t){return!(!t||!j.has(t,"callee"))}),"function"!=typeof/./&&(j.isFunction=function(t){return"function"==typeof t}),j.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},j.isNaN=function(t){return j.isNumber(t)&&t!=+t},j.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"==s.call(t)},j.isNull=function(t){return null===t},j.isUndefined=function(t){return void 0===t},j.has=function(t,e){return l.call(t,e)},j.noConflict=function(){return t._=e,this},j.identity=function(t){return t},j.times=function(t,e,n){for(var r=Array(Math.max(0,t)),i=0;t>i;i++)r[i]=e.call(n,i);return r},j.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))};var M={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};M.unescape=j.invert(M.escape);var T={escape:new RegExp("["+j.keys(M.escape).join("")+"]","g"),unescape:new RegExp("("+j.keys(M.unescape).join("|")+")","g")};j.each(["escape","unescape"],function(t){j[t]=function(e){return null==e?"":(""+e).replace(T[t],function(e){return M[t][e]})}}),j.result=function(t,e){if(null!=t){var n=t[e];return j.isFunction(n)?n.call(t):n}},j.mixin=function(t){_(j.functions(t),function(e){var n=j[e]=t[e];j.prototype[e]=function(){var t=[this._wrapped];return a.apply(t,arguments),L.call(this,n.apply(j,t))}})};var F=0;j.uniqueId=function(t){var e=++F+"";return t?t+e:e},j.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var D=/(.)^/,R={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},I=/\\|'|\r|\n|\t|\u2028|\u2029/g;j.template=function(t,e,n){var r;n=j.defaults({},n,j.templateSettings);var i=new RegExp([(n.escape||D).source,(n.interpolate||D).source,(n.evaluate||D).source].join("|")+"|$","g"),u=0,a="__p+='";t.replace(i,function(e,n,r,i,o){return a+=t.slice(u,o).replace(I,function(t){return"\\"+R[t]}),n&&(a+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),r&&(a+="'+\n((__t=("+r+"))==null?'':__t)+\n'"),i&&(a+="';\n"+i+"\n__p+='"),u=o+e.length,e}),a+="';\n",n.variable||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{r=new Function(n.variable||"obj","_",a)}catch(o){throw o.source=a,o}if(e)return r(e,j);var c=function(t){return r.call(this,t,j)};return c.source="function("+(n.variable||"obj")+"){\n"+a+"}",c},j.chain=function(t){return j(t).chain()};var L=function(t){return this._chain?j(t).chain():t};j.mixin(j),_(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=r[t];j.prototype[t]=function(){var n=this._wrapped;return e.apply(n,arguments),"shift"!=t&&"splice"!=t||0!==n.length||delete n[0],L.call(this,n)}}),_(["concat","join","slice"],function(t){var e=r[t];j.prototype[t]=function(){return L.call(this,e.apply(this._wrapped,arguments))}}),j.extend(j.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}.call(this),n("underscore",function(t){return function(){var e;return e||t._}}(this)),n("lasso/mixin/dispatcher",["underscore"],function(t){return function(e){return t.extend(e||{},{on:function(t,e,n){this.off(t,e);var r=this._dispatchDictionary||{},i=r[t]||[];i.push({func:e,context:n||this}),r[t]=i,this._dispatchDictionary=r},off:function(e,n){var r,i=this._dispatchDictionary;i&&(r=i[e],r&&(i[e]=t.reject(r,function(t){return t.func===n})))},trigger:function(e,n){var r=this._dispatchDictionary||{},i=r[e]||[];t.each(i,function(t){var e=t.func,r=t.context;e&&e.apply(r,n||[])})},dispatch:function(t,e){if(e&&t){var n;if(e.dispatchEvent){try{n=new Event(t)}catch(r){n=document.createEvent("Event"),n.initEvent(t,!1,!1)}e.dispatchEvent(n)}else n=document.createEventObject("Event"),e.fireEvent("on"+t,n)}}})}}),n("lasso/loader",["underscore","lasso/features","lasso/mixin/dispatcher"],function(t,e,n){var r=0,i=function(n){for(var r=t.extend({},n),i=t.keys(r),u=[e.queryAttributeName,e.endpointAttributeName,e.endpointDataAttributeName,"id","class","style"],a=[/^data-/],o=0;o<i.length;o++){var c=i[o];if(u.indexOf(c)>=0)delete r[c];else t:for(var s=0;s<a.length;s++){var l=a[s];if(c.match(l)){delete r[c];break t}}}return r},u=function(e,n){this.elements=t.isArray(e)?e:[e],this.endpoint=n||t.first(this.elements).oembedEndpoint()};return u.prototype=n({load:function(){var e=this.elements,n=t.filter(e,function(t){return t._loading?!1:(t.trigger("loading"),t._loading=!0,!0)});return this.on("load",t.bind(function(e){var n=t.isArray(e)?e:[e];t.each(n,function(t,e){var n=this.elements[e];n.render(t),n.trigger("load",[t])},this)},this)),this.on("fail",t.bind(function(e){t.each(this.elements,function(t){t.trigger("fail",[e])},this)},this)),this.request(this.endpoint,this.oembedQuery(n))},oembedQuery:function(e){var n,r=(this.endpoint,t.map(e,function(t){return this.elementOembedQuery(t)},this));return n=1===r.length?t.first(r):{queries:t.map(t.map(r,this.parameterize,this),encodeURIComponent).join("&")},t.extend(n,{format:this.useCors()?"json":"jsonp"})},elementOembedQuery:function(n){var r=n.getAttribute(e.queryAttributeName),u=r?n.parseQueryString(r):{},a=n.attributeMap();return t.extend(u,i(a))},useCors:function(){return e.nativeJSON&&e.cors},request:function(e,n){var r=[e,this.parameterize(n)].join("?");"jsonp"===n.format?this.jsonp(r,t.bind(function(t){this.trigger("load",[t])},this)):this.xhr("GET",r).send(t.bind(function(t,e){t?this.trigger("fail",[t]):this.trigger("load",[e])},this))},jsonpCallbackId:function(){return r++},jsonpCallbackName:function(){return"lasso_jsonp_"+this.jsonpCallbackId()},jsonp:function(t,e,n){var r=document.getElementsByTagName("body")[0],i=document.createElement("script"),u=n||this.jsonpCallbackName(),a=this.parameterize({callback:u});i.setAttribute("type","text/javascript"),i.setAttribute("src",[t,a].join("&")),r.appendChild(i),window[u]=e},xhr:function(e,n,r){var i=new XMLHttpRequest;return"withCredentials"in i?i.open(e,n,!0):"undefined"!=typeof XDomainRequest?(i=new XDomainRequest,i.open(e,n)):i=null,{send:t.bind(function(e){i.onreadystatechange=t.bind(function(){4===i.readyState&&(i.status>=200&&i.status<300?e(null,this.parse(i)):e(new Error("Request error",i),null))},this),i.send(r)},this)}},parse:function(t){try{return JSON.parse(t.responseText)}catch(e){return{}}},parameterize:function(e){return t.map(e,function(t,e){return[e,encodeURIComponent(t)].join("=")}).join("&")}}),function(t,e){return new u(t,e)}}),n("lasso/queue",["underscore","lasso/features","lasso/loader","lasso/mixin/dispatcher"],function(t,e,n,r){var i=function(t,e){this.endpoint=t,this.opts=e||{},this._started=!1,this._pending=[],this._working=[],this._completed=[]};return i.prototype=r({concurrency:function(){var t=this.opts.concurrency;return t&&t[1]||1},concurrencyType:function(){var t=this.opts.concurrency;return t&&t[0]||"oembed"},pending:function(){return this._pending},working:function(){return this._working},started:function(){return this._started},push:function(e){e.on("loading",t.bind(this.elementLoading,this,e)),e.on("load",t.bind(this.elementLoaded,this,e)),e.on("fail",t.bind(this.elementFailed,this,e)),this._pending.push(e),"rodeo"===this.concurrencyType()&&this.capacity()>1?(this.advanceTimer&&clearTimeout(this.advanceTimer),this.advanceTimer=setTimeout(t.bind(function(){this.advance()},this),10)):this.advance()},start:function(){this.started()||(this._started=!0,this.advance())},stop:function(){this._started=!1},purge:function(e){this._working=t.without(this._working,e),this._pending=t.without(this._pending,e)},advance:function(){return this.started()?this.load(this.shift()):!1},loadNext:function(){return this.load(this.shift())},capacity:function(){return this.concurrency()-this.working().length},shift:function(){for(var t=this.capacity(),e=[],n=0;t>n;n++){var r=this.pending().shift();if("undefined"==typeof r)break;e.push(r)}return e},load:function(t){if(0!==t.length){var e=n(t,this.endpoint);return e.load(),e}},elementLoading:function(t){this.purge(t),this._working.push(t),this.trigger("loading",[t])},elementLoaded:function(t){this.purge(t),this.advance(),this.trigger("load",[t])},elementFailed:function(t){this.purge(t),this.advance(),this.trigger("fail",[t])}}),function(t,e){return new i(t,e)}}),n("lasso/queue-controller",["underscore","lasso/queue","lasso/features","lasso/mixin/dispatcher"],function(t,e,n,r){return{queues:{},pushElement:function(t){var e=this.queueForElement(t);if(e)return e.push(t);throw new Error("No queue allocated for element",t)},queueForElement:function(t){var n=t.oembedEndpoint(),r=t.endpointExtendedOptions();if(this.queues[n])return this.queues[n];if(n){var i=e(n,r);return i.start(),this.queues[n]=i,i}return null}}}),n("lasso/renderer",["underscore"],function(t){var e=function(){};return e.prototype={rendered:function(t){return this.markup(t)||this.metadata(t)||this.image(t)||this.fail(t)},render:function(e,n){var r=this.rendered(n),i=(document.createDocumentFragment(),document.createElement("div"));i.innerHTML=r;for(var u=i.getElementsByTagName("script"),a=t.map(u,function(t){for(var e=document.createElement("script"),n=t.attributes,r=0;r<n.length;r++){var i=n[r];e.setAttribute(i.name,i.value)}return e.text=t.text,e});u[0];)u[0].parentNode.removeChild(u[0]);e.innerHTML=i.innerHTML,t.each(a,function(t){e.appendChild(t)})},fail:function(t){return"No lasso found :("},markup:function(t){return t.html},image:function(t){return"image"===t.type||"photo"===t.type?this.thumb(t):void 0},thumb:function(t){return t.thumbnail_url?'<img src="'+t.thumbnail_url+'" alt="'+t.title+'"/>':void 0},heading:function(t){return t.title?["<h3>",t.title,"</h3>"].join(""):void 0},description:function(t){return t.description?["<blockquote>",t.description,this.citation(t),"</blockquote>"].join(""):void 0},metadata:function(t){return[this.thumb(t)||"",this.heading(t)||"",this.description(t)||""].join("")},citation:function(t){return[this.author(t)].join("")},author:function(t){var e=t.author_url,n=t.author_name||e;return e?['<a href="'+e+">",n,"</a>"].join(""):n}},function(){return new e}}),n("lasso/element/prototype",["underscore","lasso/features","lasso/mixin/dispatcher","lasso/loader","lasso/renderer"],function(t,e,n,r,i){var u=i();return function(r){return n({isLassoElement:!0,render:function(t){var e=u.render(this,t);this.trigger("render",[e,t]),this.dispatch("load",this)},oembedEndpoint:function(){return this.localOembedEndpoint()||this.inheritedOembedEndpoint()},localOembedEndpoint:function(){return this.getAttribute(e.endpointAttributeName)},inheritedOembedEndpoint:function(){var t=this.endpointDefinitionElement();return t&&t.getAttribute(e.endpointDataAttributeName)},endpointExtendedOptions:function(){var t=this.endpointDefinitionElement();return{concurrency:t?function(){var n=t.getAttribute(e.rodeoConcurrencyAttributeName),r=parseInt(n,10);return"true"===n?["rodeo",e.rodeoMaxQueueConcurrency]:isNaN(r)?["rodeo",1]:["rodeo",r]}():["oembed",1]}},endpointDefinitionElement:function(){for(var t=this;;){var n=t.getAttribute(e.endpointDataAttributeName);if(n)return t;if(t=t.parentNode,!t||!t.getAttribute)break}return null},attributeMap:function(){var e=this.attributes,n={};return t.each(e,function(t){n[t.name]=t.value}),n},parseQueryString:function(t){for(var e={},n=t.split("&"),r=0;r<n.length;r++){var i=n[r].split("="),u=decodeURIComponent(i[0]),a=i[1]?decodeURIComponent(i[1]):!0;e[u]=a}return e},created:function(){},attached:function(){r.pushElement(this)},attributeChanged:function(t){},detached:function(){},createdCallback:function(){return this.created()},attachedCallback:function(){return this.attached()},attributeChangedCallback:function(t){return this.attributeChanged(t)},detachedCallback:function(){return this.detached()}})}}),n("lasso/element",["underscore","lasso/element/prototype"],function(t,e){return function(n){var r=e(n);return{methods:r,prototype:t.extend(Object.create(HTMLElement.prototype),r),inject:function(e){return t.extend(e,this.methods)}}}}),n("lasso/observer",["underscore","lasso/mixin/dispatcher","lasso/features"],function(t,e,n){var r=window,i=r.document,u=n.tagName,a=function(){this.scanner=null,this.lastScanElements=[]};return a.prototype=e({start:function(){this.stop(),this.scanner=r.setInterval(t.bind(this.scan,this),30)},stop:function(){window.clearInterval(this.scanner)},scan:function(){var e=t.union(this.lastScanElements,this.elements());t.each(e,t.bind(function(e){var n=this.events(e);t.each(n,t.bind(function(t){"string"==typeof t?this.trigger(t,[e]):this.trigger(t[0],[e].concat(t.slice(1)))},this))},this)),this.lastScanElements=e},events:function(e){var n=e.lastSeenState||{},r=this.elementState(e),i=n.parentNode,u=r.parentNode,a=n.attributes||{},o=r.attributes||{},c=t.keys(a),s=t.keys(o),l=t.union(s,c),f=!n.created&&e.isLassoElement!==!0,d=[];return f&&(d.push("created"),r.created=!0),i!==u&&(!i&&u?d.push("attached"):!u&&i?d.push("detached"):u&&i&&(d.push("detached"),d.push("attached"))),f||t.each(l,function(t){o[t]!==a[t]&&d.push(["attributeChanged",t])}),e.lastSeenState=r,d},elementState:function(t){return{created:!1,parentNode:t.parentNode,attributes:this.attributeMap(t)}},attributeMap:function(e){if("function"==typeof e.attributeMap)return e.attributeMap();var n=e.attributes,r={};return t.each(n,function(t){r[t.name]=t.value}),r},elements:function(){var t;return t="function"==typeof i.getElementsByTagName?i.getElementsByTagName(u):i.body.all.tags(u),Array.prototype.slice.call(t,0)},isDocumentReady:function(t){return/complete|loaded|interactive/.test((t||i).readyState)},listen:function(t,e,n){this.unlisten(t,e,n),r.addEventListener?t.addEventListener(e,n,!1):t.attachEvent(e,n)},unlisten:function(t,e,n){r.addEventListener?t.removeEventListener(e,n,!1):t.detachEvent(e,n)}}),function(){return new a}}),!function(t,e){function n(t,e){var n=t.createElement("p"),r=t.getElementsByTagName("head")[0]||t.documentElement;return n.innerHTML="x<style>"+e+"</style>",r.insertBefore(n.lastChild,r.firstChild)}function r(){var t=b.elements;return"string"==typeof t?t.split(" "):t}function i(t,e){var n=b.elements;"string"!=typeof n&&(n=n.join(" ")),"string"!=typeof t&&(t=t.join(" ")),b.elements=n+" "+t,s(e)}function u(t){var e=y[t[v]];return e||(e={},g++,t[v]=g,y[g]=e),e}function a(t,n,r){if(n||(n=e),f)return n.createElement(t);r||(r=u(n));var i;return i=r.cache[t]?r.cache[t].cloneNode():m.test(t)?(r.cache[t]=r.createElem(t)).cloneNode():r.createElem(t),!i.canHaveChildren||p.test(t)||i.tagUrn?i:r.frag.appendChild(i)}function o(t,n){if(t||(t=e),f)return t.createDocumentFragment();n=n||u(t);for(var i=n.frag.cloneNode(),a=0,o=r(),c=o.length;c>a;a++)i.createElement(o[a]);return i}function c(t,e){e.cache||(e.cache={},e.createElem=t.createElement,e.createFrag=t.createDocumentFragment,e.frag=e.createFrag()),t.createElement=function(n){return b.shivMethods?a(n,t,e):e.createElem(n)},t.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+r().join().replace(/[\w\-:]+/g,function(t){return e.createElem(t),e.frag.createElement(t),'c("'+t+'")'})+");return n}")(b,e.frag)}function s(t){t||(t=e);var r=u(t);return!b.shivCSS||l||r.hasCSS||(r.hasCSS=!!n(t,"article,aside,dialog,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}mark{background:#FF0;color:#000}template{display:none}")),f||c(t,r),t}var l,f,d="3.7.3",h=t.html5||{},p=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,m=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,v="_html5shiv",g=0,y={};!function(){try{var t=e.createElement("a");t.innerHTML="<xyz></xyz>",l="hidden"in t,f=1==t.childNodes.length||function(){e.createElement("a");var t=e.createDocumentFragment();return"undefined"==typeof t.cloneNode||"undefined"==typeof t.createDocumentFragment||"undefined"==typeof t.createElement}()}catch(n){l=!0,f=!0}}();var b={elements:h.elements||"abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output picture progress section summary template time video",version:d,shivCSS:h.shivCSS!==!1,supportsUnknownElements:f,shivMethods:h.shivMethods!==!1,type:"default",shivDocument:s,createElement:a,createDocumentFragment:o,addElements:i};t.html5=b,s(e),"object"==typeof module&&module.exports&&(module.exports=b)}("undefined"!=typeof window?window:this,document),n("html5shiv",function(t){return function(){var e;return e||t.html5}}(this)),n("lasso/shiv",["html5shiv"],function(t){return{shivElements:function(e){t.addElements(e)}}}),e(["lasso/features","lasso/queue-controller","lasso/element","lasso/observer","lasso/shiv"],function(t,e,n,r,i){var u=n(e);if(t.customElements)document.registerElement(t.tagName,{prototype:u.prototype});else{t.unknownElements||i.shivElements(t.tagName);var a=r();a.on("created",function(t){u.inject(t),t.created()}),a.on("attached",function(t){t.attached()}),a.on("attributeChanged",function(t,e){t.attributeChanged(e)}),a.on("detached",function(t){t.detached()}),a.start()}window.Lasso={features:t,element:u,queues:e}}),n("main",function(){})}();